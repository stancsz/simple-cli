version: '3.8'

services:
  agent:
    image: simple-cli:latest
    container_name: showcase-agent
    build:
      context: ../../
      dockerfile: Dockerfile
    volumes:
      - .:/app/demos/simple-cli-showcase
      - ./.agent:/app/.agent
      - ../../src:/app/src
      - ../../scripts:/app/scripts
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - JULES_AGENT_DIR=/app/demos/simple-cli-showcase/.agent
      - COMPANY_CONTEXT_FILE=/app/demos/simple-cli-showcase/company_context.json
    command: ["npm", "start", "--", "--daemon"]
    restart: unless-stopped

  mock-production:
    image: node:18-alpine
    container_name: showcase-production
    volumes:
      - ./dist:/app/dist
    command: ["sh", "-c", "echo 'Simulating production environment...' && tail -f /dev/null"]
