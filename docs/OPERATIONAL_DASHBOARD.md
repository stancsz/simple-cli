# Operational Dashboard

The **Operational Dashboard** provides a real-time, multi-tenant view of the Digital Agency's performance. It aggregates metrics from the Health Monitor, Brain, and Scheduler, and features natural language insights generated by the Operational Persona ("Sarah_DevOps").

## Features

*   **Real-time Metrics:** View task completion rates, success rates, and average duration per company.
*   **Cost Analytics:** Track estimated token costs (USD) across different tenants.
*   **Natural Language Summary:** Get a concise, human-like status update ("All systems nominal...") generated by the Operational Persona.
*   **Active Alerts:** Monitor system health and critical threshold alerts.
*   **Multi-Tenant:** Supports viewing data for all active companies in the agency.

## Architecture

The dashboard is a single-page application (SPA) served directly by the `health_monitor` MCP server.

*   **Frontend:** HTML5/CSS3/JavaScript (No build step required). Uses Chart.js for visualization.
*   **Backend:** `health_monitor` MCP server (Express.js) exposes REST APIs (`/api/dashboard/*`).
*   **Intelligence:** The `health_monitor` server communicates with the `operational_persona` MCP server to generate the natural language summary.

## Usage

### Starting the Dashboard

You can start the dashboard using the CLI command:

```bash
simple dashboard
```

This command will:
1.  Check if the dashboard server (Health Monitor) is running on port `3004`.
2.  If not running, it will start the server in the background.
3.  Open your default browser to `http://localhost:3004`.

### accessing APIs directly

*   **GET /api/dashboard/metrics**: Returns aggregated metrics per company.
*   **GET /api/dashboard/summary**: Returns the natural language summary.
*   **GET /api/dashboard/alerts**: Returns active system alerts.

## Configuration

### Alert Rules
Alerts are configured in `.agent/health/alert_rules.json` (or `scripts/dashboard/alert_rules.json` as fallback).

Example rule:
```json
[
  {
    "metric": "llm_latency",
    "threshold": 2000,
    "operator": ">",
    "contact": "slack"
  }
]
```

### Persona Customization
The "Sarah_DevOps" persona can be customized in `.agent/config/persona.json`. You can adjust the voice, tone, and catchphrases used in the dashboard summary.
